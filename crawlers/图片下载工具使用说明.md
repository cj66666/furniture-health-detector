# 测试图片批量下载工具 - 使用说明

## 📋 工具说明

本工具包含两个Python脚本，用于批量下载家具材料检测和人体工学检测所需的测试图片。

### 脚本对比

| 特性 | 基础版 | 增强版 |
|------|--------|--------|
| 文件名 | download_test_images.py | download_test_images_advanced.py |
| 图片源 | Bing | Bing + Unsplash |
| 质量检查 | ❌ | ✅ |
| 分辨率过滤 | ❌ | ✅ (最小1920x1080) |
| 去重功能 | ❌ | ✅ |
| 进度显示 | 基础 | 详细进度条 |
| 推荐使用 | 快速测试 | 生产环境 |

## 🚀 快速开始

### 1. 安装依赖

**基础版依赖**:
```bash
pip install bing-image-downloader
```

**增强版依赖**:
```bash
pip install bing-image-downloader requests pillow tqdm
```

### 2. 运行脚本

**基础版**:
```bash
cd C:\Users\cj783\Desktop\材料项目
python download_test_images.py
```

**增强版**:
```bash
cd C:\Users\cj783\Desktop\材料项目
python download_test_images_advanced.py
```

### 3. 选择下载类别

运行后会提示选择：
- 1: 仅下载家具照片
- 2: 仅下载坐姿照片
- 3: 下载全部（默认）

## 📁 下载的图片类别

### 家具照片 (6大类)

1. **实木桌椅** - 清晰木纹的实木家具
2. **板材家具** - 可见封边的板材家具
3. **皮质沙发** - 不同材质的皮革沙发
   - 真皮（全粒面革、修面革）
   - PU皮
   - 科技布
4. **布艺沙发** - 不同面料的布艺沙发
   - 棉麻
   - 绒布
5. **劣质家具** - 封边粗糙、胶水溢出等瑕疵
6. **高质量家具** - 做工精良的对比参考

### 坐姿照片 (5大类)

1. **标准坐姿** - 侧面90度标准坐姿
2. **驼背坐姿** - 不良坐姿示例
3. **椅子过高** - 脚悬空的问题坐姿
4. **椅子过低** - 膝盖过度弯曲的问题坐姿
5. **不同身高** - 不同身高人群的坐姿对比

## ⚙️ 配置参数

### 基础版配置 (download_test_images.py)

```python
CONFIG = {
    "output_dir": "test_images",  # 输出目录
    "limit": 15,  # 每类下载数量
    "adult_filter_off": True,  # 关闭成人内容过滤
    "timeout": 60,  # 超时时间（秒）
    "verbose": True,  # 显示详细信息
}
```

### 增强版配置 (download_test_images_advanced.py)

```python
CONFIG = {
    "output_dir": "test_images_hq",  # 输出目录
    "limit_per_keyword": 5,  # 每个关键词下载数量
    "min_width": 1920,  # 最小宽度（1080p）
    "min_height": 1080,  # 最小高度
    "min_file_size": 100 * 1024,  # 最小文件大小（100KB）
    "max_file_size": 10 * 1024 * 1024,  # 最大文件大小（10MB）
    "timeout": 30,  # 超时时间（秒）
    "remove_duplicates": True,  # 去重
}
```

## 🔧 配置Unsplash API（增强版可选）

Unsplash提供高质量的免费图片，配置后可获得更好的结果。

### 步骤：

1. 访问 https://unsplash.com/developers
2. 注册账号并登录
3. 点击 "New Application"
4. 填写应用信息并同意条款
5. 创建后会获得 **Access Key**
6. 打开 `download_test_images_advanced.py`
7. 找到这一行：
   ```python
   UNSPLASH_ACCESS_KEY = "YOUR_UNSPLASH_ACCESS_KEY"
   ```
8. 替换为你的Access Key：
   ```python
   UNSPLASH_ACCESS_KEY = "你的Access Key"
   ```
9. 保存并重新运行脚本

## 📊 输出结构

### 基础版输出结构
```
test_images/
├── 家具照片/
│   ├── 实木桌椅/
│   │   ├── solid wood dining table clear grain/
│   │   │   ├── Image_1.jpg
│   │   │   ├── Image_2.jpg
│   │   │   └── ...
│   │   └── ...
│   ├── 板材家具/
│   ├── 皮质沙发/
│   ├── 布艺沙发/
│   ├── 劣质家具/
│   └── 高质量家具/
└── 坐姿照片/
    ├── 标准坐姿/
    ├── 驼背坐姿/
    ├── 椅子过高/
    ├── 椅子过低/
    └── 不同身高/
```

### 增强版输出结构
```
test_images_hq/
├── 家具照片/
│   ├── 实木桌椅/
│   │   ├── solid_wood_dining_table_grain_001.jpg
│   │   ├── solid_wood_dining_table_grain_002.jpg
│   │   └── ...
│   ├── 板材家具/
│   ├── 皮质沙发_真皮/
│   ├── 皮质沙发_PU皮/
│   ├── 皮质沙发_科技布/
│   ├── 布艺沙发_棉麻/
│   ├── 布艺沙发_绒布/
│   ├── 劣质家具/
│   └── 高质量家具/
└── 坐姿照片/
    ├── 标准坐姿/
    ├── 驼背坐姿/
    ├── 椅子过高/
    ├── 椅子过低/
    └── 不同身高/
```

## ✅ 图片质量要求

增强版会自动过滤不符合以下要求的图片：

- ✅ 分辨率：至少 1920x1080 (1080p)
- ✅ 文件大小：100KB - 10MB
- ✅ 格式：JPG, JPEG, PNG, WEBP
- ✅ 无重复：自动去除重复图片

## 💡 使用建议

### 1. 下载后的处理

1. **人工筛选**：
   - 检查图片内容是否符合类别要求
   - 删除角度不合适的图片
   - 删除背景杂乱的图片
   - 删除光线不足或过曝的图片

2. **质量检查**：
   - 确认分辨率至少1080p
   - 确认图片清晰度
   - 确认拍摄角度（家具：正面或侧面；坐姿：侧面90度）

3. **数量控制**：
   - 每类保留10-15张最优质的图片
   - 确保类别平衡

### 2. 如果下载失败

**常见问题**：

1. **网络连接问题**：
   - 检查网络连接
   - 尝试使用VPN
   - 增加timeout参数

2. **依赖库问题**：
   ```bash
   pip install --upgrade bing-image-downloader requests pillow tqdm
   ```

3. **权限问题**：
   - 确保有写入权限
   - 尝试以管理员身份运行

4. **下载数量少**：
   - 增加 `limit` 或 `limit_per_keyword` 参数
   - 尝试不同的搜索关键词
   - 配置Unsplash API获取更多图片

### 3. 自定义搜索关键词

如果默认关键词下载的图片不理想，可以修改脚本中的关键词：

**基础版** - 修改 `FURNITURE_KEYWORDS` 和 `POSTURE_KEYWORDS`

**增强版** - 修改 `IMAGE_CATEGORIES`

示例：
```python
"实木桌椅": [
    "solid wood dining table clear grain",
    "wooden desk chair natural texture",
    "oak furniture wood grain pattern",
    "你的自定义关键词",  # 添加新关键词
],
```

## 🎯 推荐工作流程

1. **首次运行**：使用基础版快速下载测试
2. **检查结果**：查看下载的图片质量
3. **调整参数**：根据结果调整配置
4. **正式下载**：使用增强版下载高质量图片
5. **人工筛选**：删除不符合要求的图片
6. **图片标注**：使用标注工具标注关键信息

## 📞 问题反馈

如果遇到问题，请检查：
1. Python版本（建议3.7+）
2. 依赖库是否正确安装
3. 网络连接是否正常
4. 磁盘空间是否充足

## 📝 更新日志

### v2.0 (增强版)
- ✅ 添加图片质量检查
- ✅ 添加分辨率过滤
- ✅ 添加去重功能
- ✅ 支持Unsplash API
- ✅ 改进进度显示
- ✅ 优化文件命名

### v1.0 (基础版)
- ✅ 基础下载功能
- ✅ 分类保存
- ✅ 多关键词搜索

---

**生成时间**: 2026-01-29
**适用项目**: 家具材料检测和人体工学检测AI应用
