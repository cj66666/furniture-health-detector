<!--pages/furniture-detect/detect.wxml-->
<view class="container">
  <view class="page-header">
    <text class="page-title">å®¶å…·è¯†åˆ«</text>
    <text class="page-desc">æ‹æ‘„æ¡Œæ¤…ç…§ç‰‡ï¼ŒAIæ™ºèƒ½åˆ†æ</text>
  </view>

  <!-- æ‹ç…§åŒºåŸŸ -->
  <view class="camera-section">
    <view class="camera-placeholder">
      <text class="placeholder-icon">ğŸ“·</text>
      <text class="placeholder-text">ç‚¹å‡»æ‹æ‘„æˆ–é€‰æ‹©ç…§ç‰‡</text>
    </view>
  </view>

  <!-- åŠŸèƒ½æŒ‰é’® -->
  <view class="action-buttons">
    <button class="btn btn-primary" bindtap="takePhoto">æ‹ç…§è¯†åˆ«</button>
    <button class="btn btn-secondary" bindtap="chooseImage">ä»ç›¸å†Œé€‰æ‹©</button>
  </view>

  <!-- è¯†åˆ«ç»“æœåŒºåŸŸï¼ˆåˆå§‹éšè—ï¼‰ -->
  <view class="result-section" wx:if="{{hasResult}}">
    <text class="result-title">è¯†åˆ«ç»“æœ</text>
    <view class="result-item">
      <text class="result-label">å®¶å…·ç±»å‹ï¼š</text>
      <text class="result-value">{{detectionResult.furniture_type}}</text>
    </view>
    <view class="result-item" wx:if="{{detectionResult.materials && detectionResult.materials.length}}">
      <text class="result-label">ææ–™è¯†åˆ«ï¼š</text>
    </view>
    <view class="material-card" wx:for="{{detectionResult.materials}}" wx:key="index">
      <text class="material-title">ææ–™ {{index + 1}}</text>
      <view class="material-row">
        <text class="material-label">ç±»å‹ï¼š</text>
        <text class="material-value">{{item.material_type}}</text>
      </view>
      <view class="material-row">
        <text class="material-label">å­ç±»ï¼š</text>
        <text class="material-value">{{item.sub_type}}</text>
      </view>
      <view class="material-row">
        <text class="material-label">ç½®ä¿¡åº¦ï¼š</text>
        <text class="material-value">{{item.confidence}}%</text>
      </view>
    </view>
    <view class="risk-section" wx:if="{{detectionResult.risk_assessment}}">
      <view class="result-item">
        <text class="result-label">é£é™©ç­‰çº§ï¼š</text>
        <text class="result-value">{{detectionResult.risk_assessment.risk_level}}</text>
      </view>
      <view class="risk-block" wx:if="{{detectionResult.risk_assessment.sensitive_groups && detectionResult.risk_assessment.sensitive_groups.length}}">
        <text class="risk-title">æ•æ„Ÿäººç¾¤</text>
        <view class="risk-list">
          <text class="risk-item" wx:for="{{detectionResult.risk_assessment.sensitive_groups}}" wx:key="index">Â· {{item}}</text>
        </view>
      </view>
      <view class="risk-block" wx:if="{{detectionResult.risk_assessment.harmful_substances && detectionResult.risk_assessment.harmful_substances.length}}">
        <text class="risk-title">å¯èƒ½æœ‰å®³ç‰©è´¨</text>
        <view class="risk-list">
          <text class="risk-item" wx:for="{{detectionResult.risk_assessment.harmful_substances}}" wx:key="index">Â· {{item}}</text>
        </view>
      </view>
      <view class="risk-block" wx:if="{{detectionResult.risk_assessment.health_impacts && detectionResult.risk_assessment.health_impacts.length}}">
        <text class="risk-title">å¥åº·å½±å“</text>
        <view class="risk-list">
          <text class="risk-item" wx:for="{{detectionResult.risk_assessment.health_impacts}}" wx:key="index">Â· {{item}}</text>
        </view>
      </view>
      <view class="risk-block" wx:if="{{detectionResult.risk_assessment.recommendations && detectionResult.risk_assessment.recommendations.length}}">
        <text class="risk-title">å»ºè®®</text>
        <view class="risk-list">
          <text class="risk-item" wx:for="{{detectionResult.risk_assessment.recommendations}}" wx:key="index">Â· {{item}}</text>
        </view>
      </view>
    </view>
  </view>
</view>
